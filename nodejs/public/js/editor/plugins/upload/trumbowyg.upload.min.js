!function(r){"use strict";function e(){if(!r.trumbowyg&&!r.trumbowyg.addedXhrProgressEvent){var e=r.ajaxSettings.xhr;r.ajaxSetup({xhr:function(){var r=e(),o=this;return r&&"object"==typeof r.upload&&void 0!==o.progressUpload&&r.upload.addEventListener("progress",function(r){o.progressUpload(r)},!1),r}}),r.trumbowyg.addedXhrProgressEvent=!0}}e(),r.extend(!0,r.trumbowyg,{langs:{en:{upload:"Upload",file:"File",uploadError:"Error"},sk:{upload:"Nahrať",file:"Súbor",uploadError:"Chyba"},fr:{upload:"Envoi",file:"Fichier",uploadError:"Erreur"},cs:{upload:"Nahrát obrázek",file:"Soubor",uploadError:"Chyba"}},upload:{serverPath:"./src/plugins/upload/trumbowyg.upload.php"},opts:{btnsDef:{upload:{func:function(e,o){var a,t=o.o.prefix,l=o.openModalInsert(o.lang.upload,{file:{type:"file",required:!0},alt:{label:"description"}},function(){var e=new FormData;e.append("fileToUpload",a),0===r("."+t+"progress",l).length&&r("."+t+"modal-title",l).after(r("<div/>",{"class":t+"progress"}).append(r("<div/>",{"class":t+"progress-bar"}))),r.ajax({url:r.trumbowyg.upload.serverPath,type:"POST",data:e,cache:!1,dataType:"json",processData:!1,contentType:!1,progressUpload:function(e){r("."+t+"progress-bar").stop().animate({width:Math.round(100*e.loaded/e.total)+"%"},200)},success:function(e){"uploadSuccess"==e.message?(o.execCmd("insertImage",e.file),setTimeout(function(){o.closeModal()},250)):o.addErrorOnModalField(r("input[type=file]",l),o.lang[e.message])},error:function(){o.addErrorOnModalField(r("input[type=file]",l),o.lang.uploadError)}})});r("input[type=file]").on("change",function(r){try{a=r.target.files[0]}catch(e){a=r.target.value}})},ico:"insertImage"}}}})}(jQuery);